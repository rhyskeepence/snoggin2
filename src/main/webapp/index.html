<lift:surround with="default" at="content">

<h1>Noggin charts</h1>

<h3>Queues</h3>
<ul>
    <li><a href="chart.html?fields=activemq-berylcoral:jvmThreadCount&days=7">
        Active MQ - thread usage over the past 7 days</a>
    </li>

    <li><a href="chart.html?fields=activemq-berylcoral:jvmThreadCount&days=28&aggregate=average">
        Active MQ - average thread usage per day over the past 28 days</a>
    </li>

    <li><a href="chart.html?fields=activemq-berylcoral:jvmTotalMemory,activemq-berylcoral:jvmUsedMemory,activemq-berylcoral:jvmFreeMemory&days=7">
        Active MQ - memory usage over the past 7 days</a>
    </li>

    <li><a href="chart.html?fields=activemq-berylcoral:ActiveMqhaloInternalEnqueueCountThroughputPerSecond,activemq-berylcoral:ActiveMqhaloInternalDequeueCountThroughputPerSecond&days=7&aggregate=dailythroughput">
        HaloInternal Queue - daily enqueue/dequeue count</a>
    </li>

    <li><a href="chart.html?fields=activemq-berylcoral:ActiveMqhaloToKnitwareEnqueueCountThroughputPerSecond,activemq-berylcoral:ActiveMqhaloToKnitwareDequeueCountThroughputPerSecond&days=7&aggregate=dailythroughput">
        HaloToKnitware Queue - daily enqueue/dequeue count</a>
    </li>

    <li><a href="chart.html?fields=activemq-berylcoral:ActiveMqhaloToLlustreamplusEnqueueCountThroughputPerSecond,activemq-berylcoral:ActiveMqhaloToLlustreamplusDequeueCountThroughputPerSecond&days=7&aggregate=dailythroughput">
        HaloToLlustreamplus Queue - daily enqueue/dequeue count</a>
    </li>

    <li><a href="chart.html?fields=activemq-berylcoral:ActiveMqhaloToSideshowEnqueueCountThroughputPerSecond,activemq-berylcoral:ActiveMqhaloToSideshowDequeueCountThroughputPerSecond&days=7&aggregate=dailythroughput">
        HaloToSideshow Queue - daily enqueue/dequeue count</a>
    </li>

    <li><a href="chart.html?fields=activemq-berylcoral:ActiveMqhectorToHaloEnqueueCountThroughputPerSecond,activemq-berylcoral:ActiveMqhectorToHaloDequeueCountThroughputPerSecond&days=7&aggregate=dailythroughput">
        HectorToHalo Queue - daily enqueue/dequeue count</a>
    </li>

     <li><a href="chart.html?fields=activemq-berylcoral:ActiveMqllustreamplusToHaloEnqueueCountThroughputPerSecond,activemq-berylcoral:ActiveMqllustreamplusToHaloDequeueCountThroughputPerSecond&days=7&aggregate=dailythroughput">
        LlustreamplusToHalo Queue - daily enqueue/dequeue count</a>
    </li>

    <li><a href="chart.html?fields=activemq-berylcoral:ActiveMqnedToHaloEnqueueCountThroughputPerSecond,activemq-berylcoral:ActiveMqnedToHaloDequeueCountThroughputPerSecond&days=7&aggregate=dailythroughput">
        NedToHalo Queue - daily enqueue/dequeue count</a>
    </li>
</ul>

<h3>Netstream availability</h3>
<ul>
    <li><a href="chart.html?fields=activemq-berylcoral:jvmThreadCount,aview-prod:jvmThreadCount,bandaid-diamondquartz:jvmThreadCount,bungie-lapiz:jvmThreadCount,bungie-topaz:jvmThreadCount,dnr-diamondquartz:jvmThreadCount,grandma-lapiz:jvmThreadCount,grandma-topaz:jvmThreadCount,halo-diamondquartz:jvmThreadCount,hector-diamondquartz:jvmThreadCount,knitware-diamondquartz:jvmThreadCount,lama-lapiz:jvmThreadCount,lama-topaz:jvmThreadCount,llustreamplus-diamondquartz:jvmThreadCount,ned-diamondquartz:jvmThreadCount,nemo-lapiz:jvmThreadCount,nemo-topaz:jvmThreadCount,pacman-amberamethyst:jvmThreadCount,pacman-diamondquartz:jvmThreadCount,penfold-diamondquartz:jvmThreadCount,puma-lapiz:jvmThreadCount,puma-topaz:jvmThreadCount,reportviewer-lapiz:jvmThreadCount,reportviewer-topaz:jvmThreadCount,scheduler-diamondquartz:jvmThreadCount,sideshow-diamondquartz:jvmThreadCount,spm-diamondquartz:jvmThreadCount,swish-lapiz:jvmThreadCount,swish-topaz:jvmThreadCount,troll-citrinesapphire:jvmThreadCount,twig-diamondquartz:jvmThreadCount,uma-lapiz:jvmThreadCount,uma-topaz:jvmThreadCount&days=14&aggregate=errors">
        Downtime (in minutes) over the past 14 days</a>
    </li>
    <li><a href="http://budgie.sns.sky.com:8000/chart.html?fields=aview-prod:databaseborrowedConnectionsCount,bandaid-diamondquartz:databaseNumBusyConnections,bungie-lapiz:databaseNumBusyConnections,bungie-topaz:databaseNumBusyConnections,dnr-diamondquartz:databaseNumBusyConnections,grandma-lapiz:databaseNumBusyConnections,grandma-topaz:databaseNumBusyConnections,halo-diamondquartz:databaseNumBusyConnections,hector-diamondquartz:databaseNumBusyConnections,knitware-diamondquartz:databaseNumBusyConnections,lama-lapiz:databaseNumBusyConnections,lama-topaz:databaseNumBusyConnections,llustreamplus-diamondquartz:databaseNumBusyConnections,ned-diamondquartz:databaseNumBusyConnections,nemo-lapiz:databaseNumBusyConnections,nemo-topaz:databaseNumBusyConnections,pacman-amberamethyst:databaseNumBusyConnections,pacman-diamondquartz:databaseNumBusyConnections,penfold-diamondquartz:databaseNumBusyConnections,puma-lapiz:databaseNumBusyConnections,puma-topaz:databaseNumBusyConnections,reportviewer-lapiz:databaseNumBusyConnections,reportviewer-topaz:databaseNumBusyConnections,sideshow-diamondquartz:databaseNumBusyConnections,spm-diamondquartz:databaseNumBusyConnections,swish-lapiz:databaseNumBusyConnections,swish-topaz:databaseNumBusyConnections,twig-diamondquartz:databaseNumBusyConnections,uma-lapiz:databaseNumBusyConnections,uma-topaz:databaseNumBusyConnections&days=7">
        Database connections in use</a>
    </li>
</ul>

<h3>Pacman</h3>
<ul>
    <li><a href="chart.html?fields=pacman-amberamethyst:pacmanLineCheckerTotalRequests,pacman-amberamethyst:pacmanLineCheckerTotalFailures,pacman-amberamethyst:pacmanLineCheckerTotalExceptions,pacman-amberamethyst:pacmanDNCheckerTotalRequests,pacman-amberamethyst:pacmanDNCheckerTotalFailures,pacman-amberamethyst:pacmanDNCheckerTotalExceptions,pacman-amberamethyst:pacmanLluExchangeTotalRequests,pacman-amberamethyst:pacmanLluExchangeTotalFailures,pacman-amberamethyst:pacmanLluExchangeTotalExceptions,pacman-amberamethyst:pacmanPhoneLineInformationServiceTotalRequests,pacman-amberamethyst:pacmanPhoneLineInformationServiceTotalFailures,pacman-amberamethyst:pacmanPhoneLineInformationServiceTotalExceptions,pacman-amberamethyst:pacmanProductAvailabilityCheckerTotalRequests,pacman-amberamethyst:pacmanProductAvailabilityCheckerTotalFailures,pacman-amberamethyst:pacmanProductAvailabilityCheckerTotalExceptions,pacman-amberamethyst:xmlResponderTotalRequests,pacman-amberamethyst:xmlResponderTotalFailures,pacman-amberamethyst:xmlResponderTotalExceptions&days=7">
        Pacman (amberamethyst) - Requests, Failures and Exceptions</a>
    </li>

    <li><a href="chart.html?fields=pacman-amberamethyst:pacmanLineCheckerTotalFailures,pacman-amberamethyst:pacmanDNCheckerTotalFailures,pacman-amberamethyst:pacmanLluExchangeTotalFailures,pacman-amberamethyst:pacmanPhoneLineInformationServiceTotalFailures,pacman-amberamethyst:pacmanProductAvailabilityCheckerTotalFailures,pacman-amberamethyst:xmlResponderTotalFailures&days=7">
        Pacman (amberamethyst) - Failures</a>
    </li>

    <li><a href="chart.html?fields=pacman-amberamethyst:pacmanLineCheckerTotalExceptions,pacman-amberamethyst:pacmanDNCheckerTotalExceptions,pacman-amberamethyst:pacmanLluExchangeTotalExceptions,pacman-amberamethyst:pacmanPhoneLineInformationServiceTotalExceptions,pacman-amberamethyst:pacmanProductAvailabilityCheckerTotalExceptions,pacman-amberamethyst:xmlResponderTotalExceptions&days=7">
        Pacman (amberamethyst) - Exceptions</a>
    </li>
</ul>

<hr/>
<h1>Or, choose your own adventure</h1>
    <br/>
    Chart duration: <input type="text" id="days" onkeyup="days = this.value; render();" /> days <br/><br/>

    Aggregator:
    <select onchange="aggregator = this.value; render();">
        <option value="None">No aggregation, show detail</option>
        <option value="sum">Sum of all values, per day</option>
        <option value="average">Average of all values, per day</option>
        <option value="errors">Amount of downtime, in minutes, per day</option>
        <option value="dailythroughput">Daily Throughput (only used for ActiveMQ's ThroughputPerSecond)</option>
    </select>

    <br/>
    <br/>

    <lift:Metrics>
        <form>
            Application / metric:
            <select id="applications"></select>

            <span style="display:none" id="ajax-loader">
                <img src="/images/ajax-loader.gif" style="vertical-align: middle;" width="20" height="20"/>
            </span>

            <select id="metrics"></select>
            <a href="#" id="add_button" class="btn">Add</a>
        </form>
    </lift:Metrics>

    <div style="margin-top: 50px;">
        <pre id="generated_url"></pre>
        <a id="clickable" class="btn" href="#" onclick="$('#load-clicked').show()">Click to view</a>

        <span style="display:none" id="load-clicked">
            <img src="/images/ajax-loader.gif" style="vertical-align: middle;" width="20" height="20"/>
        </span>

    </div>

    <script>
        var aggregator = "None";
        var days = 7;
        var metrics = new Array();

        function append_metric(name) {
            metrics.push(name);
            render();
        }

        function render() {
            var url = "chart.html?fields=" + metrics.join(",") + "&days=" + days;
            if (aggregator != "None") {
                url += "&aggregator=" + aggregator;
            }

            $("#days").val(days);
            $("#generated_url").html(url);
            $("#clickable").attr("href", url);
        }

        $(render);
    </script>

</lift:surround>